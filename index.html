<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>QR Code Generator</title>
    <script src="https://raw.githubusercontent.com/flf001/flf001.github.io/main/qrcode.min.js"></script>
</head>
<body onload="body_loadHander()">
    <div id="app">
        <h1>QR Code Generator</h1>
        <form id="qr-form">
            <label for="data-input">Data:</label>
            <input type="text" id="data-input" placeholder="Enter data" required>
            <button type="button" onclick="generateQRCode()">Generate QR Code</button>
        </form>
        <div id="qr"></div>
    </div>

    <script>
        // Your QR code JavaScript functions here

        var body_loadHander = function () {
            // Your initialization code here
        };

        var generateQRCode = function () {
            // Function to generate QR code
            var dataInput = document.getElementById('data-input').value;
            update_qrcode(dataInput);
        };

        var draw_qrcode = function (text, typeNumber, errorCorrectionLevel) {
            document.write(create_qrcode(text, typeNumber, errorCorrectionLevel));
        };

        var create_qrcode = function (text, typeNumber, errorCorrectionLevel, mode, mb) {
            qrcode.stringToBytes = qrcode.stringToBytesFuncs[mb];
            var qr = qrcode(typeNumber || 4, errorCorrectionLevel || 'M');
            qr.addData(text, mode);
            qr.make();
            // Use qr.createImgTag() to return an image tag
            return qr.createImgTag();
        };

        var update_qrcode = function (text) {
            var form = document.forms['qr-form'];
            var text = form.elements['data-input'].value.replace(/^[\s\u3000]+|[\s\u3000]+$/g, '');
            var t = form.elements['t'].value;
            var e = form.elements['e'].value;
            var m = form.elements['m'].value;
            var mb = form.elements['mb'].value;

            console.log("text:", text);
            console.log("t:", t);
            console.log("e:", e);
            console.log("m:", m);
            console.log("mb:", mb);

            document.getElementById('qr').innerHTML = create_qrcode(text, t, e, m, mb);
        };
    </script>
</body>
</html>
